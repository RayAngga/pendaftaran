const API_BASE="";async function call(body){const r=await fetch(`${API_BASE}/api/appscript`,{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-store"},cache:"no-store",body:JSON.stringify(body)});const j=await r.json().catch(()=>({}));if(!r.ok||j?.ok===false)throw new Error(j?.error||`HTTP ${r.status}`);return j}async function adminLogin(pass){const r=await fetch(`${API_BASE}/api/admin-login`,{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-store"},cache:"no-store",body:JSON.stringify({pass})});const j=await r.json().catch(()=>({}));if(!r.ok||j?.ok===false)throw new Error(j?.error||`HTTP ${r.status}`);return j}async function adminLogout(){await fetch(`${API_BASE}/api/admin-logout`,{method:"POST",cache:"no-store",headers:{"Cache-Control":"no-store"}})}async function register(payload){return call({action:"register",payload})}async function findByWA(wa){return call({action:"findByWA",payload:{wa}})}async function getTicket(q){return call({action:"getTicket",payload:{q}})}async function submitProof(id,dataUrl){return call({action:"submitProof",payload:{id,dataUrl}})}async function list(){return call({action:"list"})}async function remove(id){return call({action:"delete",payload:{id}})}async function togglePaid(id){return call({action:"togglePaid",payload:{id}})}async function toggleAttend(id){return call({action:"toggleAttend",payload:{id}})}export const api={adminLogin,adminLogout,register,findByWA,getTicket,submitProof,list,remove,togglePaid,toggleAttend};