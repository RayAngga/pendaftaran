:root{
  --brand:#22d3ee;
  --accent:#a78bfa;
}

/* ---------- Base ---------- */
*{ box-sizing:border-box }

/* Section show/hide anim */
.section{ transition:opacity .18s ease, transform .18s ease; }
.section.hidden{ opacity:0; transform:translateY(8px); display:none; }

/* Badges */
.badge{ display:inline-block; padding:.125rem .5rem; border-radius:.5rem; font-size:.75rem; background:#0b1220; }
.badge.ok{   background:rgba(16,185,129,.18); color:#a7f3d0; }
.badge.warn{ background:rgba(251,191,36,.18); color:#fde68a; }

/* ---------- (Legacy) Ticket card HTML mode ---------- */
.ticket{
  position:relative;
  border-radius:16px;
  border:1px dashed rgba(255,255,255,.2);
  background:linear-gradient(135deg,rgba(34,211,238,.07),rgba(167,139,250,.07));
  overflow:hidden;
}
.ticket .stripe{ position:absolute; inset:auto 0 0 0; height:6px; background:linear-gradient(90deg,var(--brand),var(--accent)); }
.ticket .ticket-inner{ display:grid; grid-template-columns:1fr 200px; gap:16px; padding:20px; }
.ticket .title{ font-weight:800; font-size:20px; }
.ticket .meta{ color:#cbd5e1; }
.qr-wrap{
  width:160px; height:160px;                 /* diperkecil */
  display:grid; place-items:center;
  border-radius:12px; background:#fff;
  border:1px solid rgba(255,255,255,.08);
}

/* ---------- Canvas Ticket (mode baru) ---------- */
#ticket-wrap{ text-align:center; }
#ticket-canvas{
  display:block;
  width:100%;
  max-width:900px;  /* batas lebar di layar besar */
  height:auto;
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.35);
  border:1px solid rgba(255,255,255,.08);
}

/* ---------- Skeleton / Loading ---------- */
.skeleton{
  background:linear-gradient(90deg,#1f2937 0,#334155 50%,#1f2937 100%);
  background-size:200% 100%;
  border-radius:8px;
  animation:skeleton 1.2s ease-in-out infinite;
}
@keyframes skeleton{
  0%{ background-position:200% 0 }
  100%{ background-position:-200% 0 }
}

/* ---------- Spinner (overlay) ---------- */
.segmented{
  width:22px; height:22px; border-radius:50%;
  background:conic-gradient(from 0deg, rgba(34,211,238,.9) 0 12%, transparent 12% 25%);
  -webkit-mask:radial-gradient(farthest-side,transparent 55%,#000 56%);
  mask:radial-gradient(farthest-side,transparent 55%,#000 56%);
  animation:spin 1s linear infinite;
}
.segmented.large{ width:56px; height:56px; }
@keyframes spin{ to{ transform:rotate(360deg) } }

/* ---------- Overlay & Popup ---------- */
.overlay{ position:fixed; inset:0; background:rgba(0,0,0,.5); display:grid; place-items:center; z-index:60; }
.overlay-box{
  width:min(92vw,460px);
  border-radius:16px; padding:24px;
  background:#0b1220;
  border:1px solid rgba(255,255,255,.08);
}
.popup{ position:fixed; inset:0; display:grid; place-items:center; z-index:70; pointer-events:none; }
.popup-box{
  width:min(88vw,380px);
  border-radius:16px; padding:20px;
  background:#0b1220;
  border:1px solid rgba(255,255,255,.08);
}
.popup-icon{ width:42px; height:42px; border-radius:50%; }
.popup-icon.ok{   background:radial-gradient(circle at 30% 30%,#34d399,#065f46); }
.popup-icon.warn{ background:radial-gradient(circle at 30% 30%,#f59e0b,#7c2d12); }
.popup-icon.err{  background:radial-gradient(circle at 30% 30%,#ef4444,#7f1d1d); }

/* ---------- Mobile tweaks (â‰¤640px) ---------- */
@media (max-width:640px){
  /* Header: judul sejajar ikon, tombol pindah ke baris bawah (sudah di HTML dengan flex-col).
     Di sini kita pastikan spacing & center rapi. */
  header .max-w-6xl > .w-full{
    justify-content:center;
  }

  /* Pencarian tiket & login admin center (sudah mx-auto di HTML),
     tambahkan sedikit batas lebar agar tidak terlalu melebar. */
  #section-ticket .bg-white\/5 > div,
  #admin-login .max-w-sm{
    max-width: 28rem;
    margin-inline: auto;
  }

  /* Tombol aksi di blok tiket & login full width biar gampang di-tap */
  #t-find,
  #t-download,
  #admin-enter{
    width:100%;
  }
}


/* === Animations & Transitions Add-on (non-destructive) === */
#route-veil{
  position: fixed; inset: 0;
  pointer-events: none;
  background:
    radial-gradient(1200px 800px at 20% 20%, rgba(34,211,238,.14), transparent 60%),
    radial-gradient(900px 700px at 80% 25%, rgba(167,139,250,.12), transparent 60%),
    linear-gradient(135deg, rgba(2,6,23,.8), rgba(2,6,23,.92));
  transform-origin: left center;
  transform: scaleX(0);
  transition: transform .28s ease;
  z-index: 80;
}
#route-veil.veil-in{ transform: scaleX(1); }
#route-veil.veil-out{ transform: scaleX(0); }

/* Route enter/leave keyframes (used by JS) */
@keyframes routeIn {
  from{ opacity:0; transform: translateY(10px) scale(.98); }
  to  { opacity:1; transform: translateY(0)    scale(1); }
}
@keyframes routeOut {
  from{ opacity:1; transform: translateY(0)    scale(1); }
  to  { opacity:0; transform: translateY(-8px) scale(.985); }
}
.section.route-enter{ animation: routeIn .34s cubic-bezier(.2,.7,.2,1) both; }
.section.route-leave{ animation: routeOut .22s ease both; }

/* Reveal on scroll */
.reveal{ opacity:0; transform: translateY(10px); }
.reveal-in{ opacity:1; transform: none; transition: opacity .5s ease, transform .5s ease; }

/* Floaty micro-animation */
@keyframes floatyKey {
  0% { transform: translateY(0) }
  50%{ transform: translateY(-6px) }
  100%{ transform: translateY(0) }
}
.floaty{ animation: floatyKey 4s ease-in-out infinite; will-change: transform; }

/* Button micro interaction (opt-in via 'active' state) */
button:active{ transform: translateY(1px) scale(.99); }

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  #route-veil{ transition: none }
  .section.route-enter, .section.route-leave{ animation: none !important }
  .reveal-in{ transition: none }
  .floaty{ animation: none }
}


/* === Advanced Animations Pack === */
/* Choose mode via <body data-trans="cube|parallax|curtain"> */
:root{
  --trans-perspective: 1100px;
  --trans-dur-in: .55s;
  --trans-dur-out: .38s;
}

/* Animated underline for nav chips */
.nav-btn{
  position: relative;
  overflow: hidden;
}
.nav-btn::after{
  content:"";
  position:absolute; left:12%; right:12%; bottom:.25rem; height:2px;
  background: linear-gradient(90deg, var(--brand), var(--accent));
  transform: scaleX(0);
  transform-origin: center;
  transition: transform .28s ease;
  border-radius: 2px;
}
.nav-btn:hover::after, .nav-btn[aria-current="page"]::after{
  transform: scaleX(1);
}

/* Ripple click (JS injects .rpl) */
.rpl{
  position:absolute; inset:0; pointer-events:none; overflow:hidden;
}
.rpl span{
  position:absolute; border-radius:50%;
  width:12px; height:12px; opacity:.24;
  background: radial-gradient(circle, rgba(255,255,255,.75), rgba(255,255,255,0) 60%);
  transform: translate(-50%, -50%) scale(1);
  animation: rpl .7s ease-out forwards;
}
@keyframes rpl{
  to{ transform: translate(-50%, -50%) scale(35); opacity:0; }
}

/* Magnetic hover: target elements add [data-magnetic] attribute; JS will transform */

/* --- Route transition: CUBE (3D rotate) --- */
@keyframes cubeOut{
  from{ opacity:1; transform: perspective(var(--trans-perspective)) rotateY(0) translateZ(0); filter:blur(0) }
  to  { opacity:0; transform: perspective(var(--trans-perspective)) rotateY(-40deg) translateZ(-40px); filter:blur(1px) }
}
@keyframes cubeIn{
  from{ opacity:0; transform: perspective(var(--trans-perspective)) rotateY(40deg) translateZ(-40px); filter:blur(1px) }
  to  { opacity:1; transform: perspective(var(--trans-perspective)) rotateY(0) translateZ(0); filter:blur(0) }
}
body[data-trans="cube"] .section.route-enter{ animation: cubeIn var(--trans-dur-in) cubic-bezier(.2,.7,.2,1) both; }
body[data-trans="cube"] .section.route-leave{ animation: cubeOut var(--trans-dur-out) ease both; }

/* --- Route transition: PARALLAX SLIDE --- */
@keyframes slideParallaxOut{
  from{ opacity:1; transform: translate3d(0,0,0) }
  to  { opacity:0; transform: translate3d(-28px,0,0) }
}
@keyframes slideParallaxIn{
  from{ opacity:0; transform: translate3d(28px,0,0) }
  to  { opacity:1; transform: translate3d(0,0,0) }
}
body[data-trans="parallax"] .section.route-enter{ animation: slideParallaxIn .52s cubic-bezier(.2,.7,.2,1) both; }
body[data-trans="parallax"] .section.route-leave{ animation: slideParallaxOut .34s ease both; }

/* --- Route transition: CURTAIN (diagonal clip) --- */
#route-curtain{
  position:fixed; inset:0; pointer-events:none; z-index:85;
  background: linear-gradient(135deg, rgba(34,211,238,.22), rgba(167,139,250,.22) 35%, rgba(2,6,23,.95) 70%);
  clip-path: polygon(0 0, 0 0, 0 100%, 0 100%);
  transition: clip-path .5s cubic-bezier(.2,.7,.2,1);
}
#route-curtain.on{
  clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
}
/* also fade sections a bit for curtain */
body[data-trans="curtain"] .section.route-enter{ animation: routeIn .42s cubic-bezier(.2,.7,.2,1) both; }
body[data-trans="curtain"] .section.route-leave{ animation: routeOut .28s ease both; }

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  .nav-btn::after{ transition:none }
  .rpl span{ animation:none }
  #route-curtain{ transition:none }
  body[data-trans="cube"] .section.route-enter,
  body[data-trans="cube"] .section.route-leave,
  body[data-trans="parallax"] .section.route-enter,
  body[data-trans="parallax"] .section.route-leave,
  body[data-trans="curtain"] .section.route-enter,
  body[data-trans="curtain"] .section.route-leave{ animation:none !important }
}
